var widgets = require("sdk/widget");
var tabs = require("sdk/tabs");
var Request = require("sdk/request").Request;


var widget = widgets.Widget({
	id: "mozilla-link",
	label: "Mozilla website",
	contentURL: "http://www.mozilla.org/favicon.ico",
	onClick: listTabs
});



function listTabs() {
	openTabs=[];
	for each (var tab in tabs) {
		openTabs.push({"title":tab.title,"url":tab.url});
	}

	x = Request({
		url: "http://localhost/~ratanraj/sourcerer/tabs.php",
		content:{tablist:openTabs},
		overrideMimeType: "text/plain; charset=latin1",
		onComplete: function (response) {
			console.log(response.text);
		}
	});

	x.get();	
}
